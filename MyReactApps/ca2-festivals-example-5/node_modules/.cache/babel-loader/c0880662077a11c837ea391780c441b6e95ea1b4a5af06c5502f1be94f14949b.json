{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Fer\\\\Documents\\\\UNI\\\\Year4\\\\Javascript\\\\MyReactApps\\\\ca2-festivals-example-5\\\\src\\\\components\\\\LoginForm.js\",\n  _s = $RefreshSig$();\nimport { useState } from 'react';\nimport axios from '../config';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst LoginForm = props => {\n  _s();\n  const [form, setForm] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const styles = {\n    color: \"red\",\n    backgroundColor: \"white\"\n  };\n  const handleForm = e => {\n    let name = e.target.name;\n    let value = e.target.value;\n\n    // console.log(`${name}: ${value}`);\n\n    // setForm({\n    //     [name]: value\n    // });\n\n    // setForm((prevState) => {\n    //     return {\n    //         ...prevState,\n    //         [name]: value\n    //     }\n    // });\n\n    setForm(prevState => ({\n      ...prevState,\n      [name]: value\n    }));\n  };\n  const submitForm = () => {\n    console.log(\"Email: \", form.email);\n    console.log(\"Password: \", form.password);\n    axios.post('https://festivals-api.vercel.app/api/users/login', {\n      email: form.email,\n      password: form.password\n    }).then(response => {\n      console.log(response.data);\n      setErrorMessage(\"\");\n      props.onAuthenticated(true, response.data.token);\n    }).catch(err => {\n      console.error(err);\n      console.log(err.response.data);\n      setErrorMessage(err.response.data.message);\n    });\n  };\n\n  // if(authenticated) return \"You are logged in\";\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [\"Email: \", /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      name: \"email\",\n      value: form.email,\n      onChange: handleForm\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 20\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this), \"Password: \", /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"password\",\n      name: \"password\",\n      value: form.password,\n      onChange: handleForm\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 23\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: submitForm,\n      children: \"Submit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: styles,\n      children: errorMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n_s(LoginForm, \"889R5WMloDTnkQQYhhA4rVgneZ4=\");\n_c = LoginForm;\nexport default LoginForm;\nvar _c;\n$RefreshReg$(_c, \"LoginForm\");","map":{"version":3,"names":["useState","axios","LoginForm","props","form","setForm","email","password","errorMessage","setErrorMessage","styles","color","backgroundColor","handleForm","e","name","target","value","prevState","submitForm","console","log","post","then","response","data","onAuthenticated","token","catch","err","error","message"],"sources":["C:/Users/Fer/Documents/UNI/Year4/Javascript/MyReactApps/ca2-festivals-example-5/src/components/LoginForm.js"],"sourcesContent":["import { useState } from 'react';\r\nimport axios from '../config';\r\n\r\nconst LoginForm = (props) => {\r\n    const [form, setForm] = useState({\r\n        email: \"\",\r\n        password: \"\"\r\n    });\r\n    const [errorMessage, setErrorMessage] = useState(\"\");\r\n\r\n    const styles = { color: \"red\", backgroundColor:\"white\" };\r\n\r\n    const handleForm = (e) => {\r\n        let name = e.target.name;\r\n        let value = e.target.value;\r\n\r\n        // console.log(`${name}: ${value}`);\r\n\r\n        // setForm({\r\n        //     [name]: value\r\n        // });\r\n\r\n        // setForm((prevState) => {\r\n        //     return {\r\n        //         ...prevState,\r\n        //         [name]: value\r\n        //     }\r\n        // });\r\n\r\n        setForm(prevState => ({\r\n            ...prevState,\r\n            [name]: value\r\n        }));\r\n    };\r\n\r\n    const submitForm = () => {\r\n        console.log(\"Email: \", form.email);\r\n        console.log(\"Password: \", form.password);\r\n\r\n        axios.post('https://festivals-api.vercel.app/api/users/login', {\r\n                email: form.email,\r\n                password: form.password\r\n            })\r\n             .then((response) => {\r\n                console.log(response.data);\r\n                setErrorMessage(\"\");\r\n                props.onAuthenticated(true, response.data.token);\r\n             })\r\n             .catch((err) => {\r\n                console.error(err);\r\n                console.log(err.response.data);\r\n                setErrorMessage(err.response.data.message);\r\n             });\r\n    };\r\n\r\n    // if(authenticated) return \"You are logged in\";\r\n\r\n    return (\r\n        <>\r\n            Email: <input type=\"text\" name=\"email\" value={form.email} onChange={handleForm} />\r\n            <br />\r\n            Password: <input type=\"password\" name=\"password\" value={form.password} onChange={handleForm} />\r\n            <button onClick={submitForm}>Submit</button>\r\n            <p style={styles}>{errorMessage}</p>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default LoginForm;"],"mappings":";;AAAA,SAASA,QAAQ,QAAQ,OAAO;AAChC,OAAOC,KAAK,MAAM,WAAW;AAAC;AAAA;AAE9B,MAAMC,SAAS,GAAIC,KAAK,IAAK;EAAA;EACzB,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGL,QAAQ,CAAC;IAC7BM,KAAK,EAAE,EAAE;IACTC,QAAQ,EAAE;EACd,CAAC,CAAC;EACF,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAEpD,MAAMU,MAAM,GAAG;IAAEC,KAAK,EAAE,KAAK;IAAEC,eAAe,EAAC;EAAQ,CAAC;EAExD,MAAMC,UAAU,GAAIC,CAAC,IAAK;IACtB,IAAIC,IAAI,GAAGD,CAAC,CAACE,MAAM,CAACD,IAAI;IACxB,IAAIE,KAAK,GAAGH,CAAC,CAACE,MAAM,CAACC,KAAK;;IAE1B;;IAEA;IACA;IACA;;IAEA;IACA;IACA;IACA;IACA;IACA;;IAEAZ,OAAO,CAACa,SAAS,KAAK;MAClB,GAAGA,SAAS;MACZ,CAACH,IAAI,GAAGE;IACZ,CAAC,CAAC,CAAC;EACP,CAAC;EAED,MAAME,UAAU,GAAG,MAAM;IACrBC,OAAO,CAACC,GAAG,CAAC,SAAS,EAAEjB,IAAI,CAACE,KAAK,CAAC;IAClCc,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEjB,IAAI,CAACG,QAAQ,CAAC;IAExCN,KAAK,CAACqB,IAAI,CAAC,kDAAkD,EAAE;MACvDhB,KAAK,EAAEF,IAAI,CAACE,KAAK;MACjBC,QAAQ,EAAEH,IAAI,CAACG;IACnB,CAAC,CAAC,CACAgB,IAAI,CAAEC,QAAQ,IAAK;MACjBJ,OAAO,CAACC,GAAG,CAACG,QAAQ,CAACC,IAAI,CAAC;MAC1BhB,eAAe,CAAC,EAAE,CAAC;MACnBN,KAAK,CAACuB,eAAe,CAAC,IAAI,EAAEF,QAAQ,CAACC,IAAI,CAACE,KAAK,CAAC;IACnD,CAAC,CAAC,CACDC,KAAK,CAAEC,GAAG,IAAK;MACbT,OAAO,CAACU,KAAK,CAACD,GAAG,CAAC;MAClBT,OAAO,CAACC,GAAG,CAACQ,GAAG,CAACL,QAAQ,CAACC,IAAI,CAAC;MAC9BhB,eAAe,CAACoB,GAAG,CAACL,QAAQ,CAACC,IAAI,CAACM,OAAO,CAAC;IAC7C,CAAC,CAAC;EACX,CAAC;;EAED;;EAEA,oBACI;IAAA,mCACW;MAAO,IAAI,EAAC,MAAM;MAAC,IAAI,EAAC,OAAO;MAAC,KAAK,EAAE3B,IAAI,CAACE,KAAM;MAAC,QAAQ,EAAEO;IAAW;MAAA;MAAA;MAAA;IAAA,QAAG,eAClF;MAAA;MAAA;MAAA;IAAA,QAAM,6BACI;MAAO,IAAI,EAAC,UAAU;MAAC,IAAI,EAAC,UAAU;MAAC,KAAK,EAAET,IAAI,CAACG,QAAS;MAAC,QAAQ,EAAEM;IAAW;MAAA;MAAA;MAAA;IAAA,QAAG,eAC/F;MAAQ,OAAO,EAAEM,UAAW;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAAgB,eAC5C;MAAG,KAAK,EAAET,MAAO;MAAA,UAAEF;IAAY;MAAA;MAAA;MAAA;IAAA,QAAK;EAAA,gBACrC;AAEX,CAAC;AAAC,GA/DIN,SAAS;AAAA,KAATA,SAAS;AAiEf,eAAeA,SAAS;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}