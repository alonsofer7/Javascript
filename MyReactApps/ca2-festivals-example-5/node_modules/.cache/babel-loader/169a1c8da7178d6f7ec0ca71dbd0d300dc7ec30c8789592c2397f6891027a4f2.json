{"ast":null,"code":"import _defineProperty from\"C:/Users/Fer/Documents/UNI/Year4/Javascript/MyReactApps/ca2-festivals-example-5/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Fer/Documents/UNI/Year4/Javascript/MyReactApps/ca2-festivals-example-5/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Fer/Documents/UNI/Year4/Javascript/MyReactApps/ca2-festivals-example-5/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import axios from'../config';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LoginForm=function LoginForm(props){var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),errorMessage=_useState4[0],setErrorMessage=_useState4[1];var styles={color:\"red\",backgroundColor:\"white\"};var handleForm=function handleForm(e){var name=e.target.name;var value=e.target.value;// console.log(`${name}: ${value}`);\n// setForm({\n//     [name]: value\n// });\n// setForm((prevState) => {\n//     return {\n//         ...prevState,\n//         [name]: value\n//     }\n// });\nsetForm(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},name,value));});};var submitForm=function submitForm(){console.log(\"Email: \",form.email);console.log(\"Password: \",form.password);axios.post('/users/login',{email:form.email,password:form.password}).then(function(response){console.log(response.data);setErrorMessage(\"\");props.onAuthenticated(true,response.data.token);}).catch(function(err){console.error(err);console.log(err.response.data);setErrorMessage(err.response.data.message);});};// if(authenticated) return \"You are logged in\";\nreturn/*#__PURE__*/_jsxs(_Fragment,{children:[\"Email: \",/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"email\",value:form.email,onChange:handleForm}),/*#__PURE__*/_jsx(\"br\",{}),\"Password: \",/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:form.password,onChange:handleForm}),/*#__PURE__*/_jsx(\"button\",{onClick:submitForm,children:\"Submit\"}),/*#__PURE__*/_jsx(\"p\",{style:styles,children:errorMessage})]});};export default LoginForm;","map":{"version":3,"names":["useState","axios","LoginForm","props","email","password","form","setForm","errorMessage","setErrorMessage","styles","color","backgroundColor","handleForm","e","name","target","value","prevState","submitForm","console","log","post","then","response","data","onAuthenticated","token","catch","err","error","message"],"sources":["C:/Users/Fer/Documents/UNI/Year4/Javascript/MyReactApps/ca2-festivals-example-5/src/components/LoginForm.js"],"sourcesContent":["import { useState } from 'react';\r\nimport axios from '../config';\r\n\r\nconst LoginForm = (props) => {\r\n    const [form, setForm] = useState({\r\n        email: \"\",\r\n        password: \"\"\r\n    });\r\n    const [errorMessage, setErrorMessage] = useState(\"\");\r\n\r\n    const styles = { color: \"red\", backgroundColor:\"white\" };\r\n\r\n    const handleForm = (e) => {\r\n        let name = e.target.name;\r\n        let value = e.target.value;\r\n\r\n        // console.log(`${name}: ${value}`);\r\n\r\n        // setForm({\r\n        //     [name]: value\r\n        // });\r\n\r\n        // setForm((prevState) => {\r\n        //     return {\r\n        //         ...prevState,\r\n        //         [name]: value\r\n        //     }\r\n        // });\r\n\r\n        setForm(prevState => ({\r\n            ...prevState,\r\n            [name]: value\r\n        }));\r\n    };\r\n\r\n    const submitForm = () => {\r\n        console.log(\"Email: \", form.email);\r\n        console.log(\"Password: \", form.password);\r\n\r\n        axios.post('/users/login', {\r\n                email: form.email,\r\n                password: form.password\r\n            })\r\n             .then((response) => {\r\n                console.log(response.data);\r\n                setErrorMessage(\"\");\r\n                props.onAuthenticated(true, response.data.token);\r\n             })\r\n             .catch((err) => {\r\n                console.error(err);\r\n                console.log(err.response.data);\r\n                setErrorMessage(err.response.data.message);\r\n             });\r\n    };\r\n\r\n    // if(authenticated) return \"You are logged in\";\r\n\r\n    return (\r\n        <>\r\n            Email: <input type=\"text\" name=\"email\" value={form.email} onChange={handleForm} />\r\n            <br />\r\n            Password: <input type=\"password\" name=\"password\" value={form.password} onChange={handleForm} />\r\n            <button onClick={submitForm}>Submit</button>\r\n            <p style={styles}>{errorMessage}</p>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default LoginForm;"],"mappings":"gfAAA,OAASA,QAAQ,KAAQ,OAAO,CAChC,MAAOC,MAAK,KAAM,WAAW,CAAC,6IAE9B,GAAMC,UAAS,CAAG,QAAZA,UAAS,CAAIC,KAAK,CAAK,CACzB,cAAwBH,QAAQ,CAAC,CAC7BI,KAAK,CAAE,EAAE,CACTC,QAAQ,CAAE,EACd,CAAC,CAAC,wCAHKC,IAAI,eAAEC,OAAO,eAIpB,eAAwCP,QAAQ,CAAC,EAAE,CAAC,yCAA7CQ,YAAY,eAAEC,eAAe,eAEpC,GAAMC,OAAM,CAAG,CAAEC,KAAK,CAAE,KAAK,CAAEC,eAAe,CAAC,OAAQ,CAAC,CAExD,GAAMC,WAAU,CAAG,QAAbA,WAAU,CAAIC,CAAC,CAAK,CACtB,GAAIC,KAAI,CAAGD,CAAC,CAACE,MAAM,CAACD,IAAI,CACxB,GAAIE,MAAK,CAAGH,CAAC,CAACE,MAAM,CAACC,KAAK,CAE1B;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEAV,OAAO,CAAC,SAAAW,SAAS,wCACVA,SAAS,wBACXH,IAAI,CAAGE,KAAK,IACf,CAAC,CACP,CAAC,CAED,GAAME,WAAU,CAAG,QAAbA,WAAU,EAAS,CACrBC,OAAO,CAACC,GAAG,CAAC,SAAS,CAAEf,IAAI,CAACF,KAAK,CAAC,CAClCgB,OAAO,CAACC,GAAG,CAAC,YAAY,CAAEf,IAAI,CAACD,QAAQ,CAAC,CAExCJ,KAAK,CAACqB,IAAI,CAAC,cAAc,CAAE,CACnBlB,KAAK,CAAEE,IAAI,CAACF,KAAK,CACjBC,QAAQ,CAAEC,IAAI,CAACD,QACnB,CAAC,CAAC,CACAkB,IAAI,CAAC,SAACC,QAAQ,CAAK,CACjBJ,OAAO,CAACC,GAAG,CAACG,QAAQ,CAACC,IAAI,CAAC,CAC1BhB,eAAe,CAAC,EAAE,CAAC,CACnBN,KAAK,CAACuB,eAAe,CAAC,IAAI,CAAEF,QAAQ,CAACC,IAAI,CAACE,KAAK,CAAC,CACnD,CAAC,CAAC,CACDC,KAAK,CAAC,SAACC,GAAG,CAAK,CACbT,OAAO,CAACU,KAAK,CAACD,GAAG,CAAC,CAClBT,OAAO,CAACC,GAAG,CAACQ,GAAG,CAACL,QAAQ,CAACC,IAAI,CAAC,CAC9BhB,eAAe,CAACoB,GAAG,CAACL,QAAQ,CAACC,IAAI,CAACM,OAAO,CAAC,CAC7C,CAAC,CAAC,CACX,CAAC,CAED;AAEA,mBACI,kDACW,cAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAEzB,IAAI,CAACF,KAAM,CAAC,QAAQ,CAAES,UAAW,EAAG,cAClF,aAAM,2BACI,cAAO,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAEP,IAAI,CAACD,QAAS,CAAC,QAAQ,CAAEQ,UAAW,EAAG,cAC/F,eAAQ,OAAO,CAAEM,UAAW,oBAAgB,cAC5C,UAAG,KAAK,CAAET,MAAO,UAAEF,YAAY,EAAK,GACrC,CAEX,CAAC,CAED,cAAeN,UAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}