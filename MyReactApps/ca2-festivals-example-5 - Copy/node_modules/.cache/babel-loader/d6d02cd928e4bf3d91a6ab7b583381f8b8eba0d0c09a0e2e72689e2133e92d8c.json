{"ast":null,"code":"import _slicedToArray from\"C:/Users/Fer/Documents/UNI/Year4/Javascript/MyReactApps/ca2-festivals-example-5/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{BrowserRouter as Router,Routes,Route}from'react-router-dom';import{useState,useEffect}from'react';import Container from'@mui/material/Container';import Grid from'@mui/material/Grid';import'./assets/css/app.css';//import pages\nimport Home from'./pages/Home';import FestivalsIndex from'./pages/festivals/Index';import FestivalsShow from'./pages/festivals/Show';import FestivalsCreate from'./pages/festivals/Create';import FestivalsEdit from'./pages/festivals/Edit';import PageNotFound from'./pages/PageNotFound';//import components\nimport Navbar from'./components/Navbar';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),authenticated=_useState2[0],setAuthenticated=_useState2[1];var protectedFestivals;useEffect(function(){if(localStorage.getItem('token')){setAuthenticated(true);}},[]);var onAuthenticated=function onAuthenticated(auth,token){setAuthenticated(auth);if(auth){localStorage.setItem('token',token);}else{localStorage.removeItem('token');}};if(authenticated){protectedFestivals=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Route,{path:\"/festivals/:id/edit\",element:/*#__PURE__*/_jsx(FestivalsEdit,{})}),/*#__PURE__*/_jsx(Route,{path:\"/festivals/:id\",element:/*#__PURE__*/_jsx(FestivalsShow,{})}),/*#__PURE__*/_jsx(Route,{path:\"/festivals/create\",element:/*#__PURE__*/_jsx(FestivalsCreate,{})})]});}return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Container,{maxWidth:\"md\",children:[/*#__PURE__*/_jsx(Navbar,{onAuthenticated:onAuthenticated,authenticated:authenticated}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{onAuthenticated:onAuthenticated,authenticated:authenticated})}),/*#__PURE__*/_jsx(Route,{path:\"/festivals\",element:/*#__PURE__*/_jsx(FestivalsIndex,{authenticated:authenticated})}),protectedFestivals,/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(PageNotFound,{})})]})]})});};export default App;","map":{"version":3,"names":["BrowserRouter","Router","Routes","Route","useState","useEffect","Container","Grid","Home","FestivalsIndex","FestivalsShow","FestivalsCreate","FestivalsEdit","PageNotFound","Navbar","App","authenticated","setAuthenticated","protectedFestivals","localStorage","getItem","onAuthenticated","auth","token","setItem","removeItem"],"sources":["C:/Users/Fer/Documents/UNI/Year4/Javascript/MyReactApps/ca2-festivals-example-5/src/App.js"],"sourcesContent":["import { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\r\nimport { useState, useEffect } from 'react';\r\nimport Container from '@mui/material/Container';\r\nimport Grid from '@mui/material/Grid';\r\n\r\nimport './assets/css/app.css';\r\n\r\n//import pages\r\nimport Home from './pages/Home';\r\nimport FestivalsIndex from './pages/festivals/Index';\r\nimport FestivalsShow from './pages/festivals/Show';\r\nimport FestivalsCreate from './pages/festivals/Create';\r\nimport FestivalsEdit from './pages/festivals/Edit';\r\n\r\nimport PageNotFound from './pages/PageNotFound';\r\n\r\n//import components\r\nimport Navbar from './components/Navbar';\r\n\r\nconst App = () => {\r\n    const [authenticated, setAuthenticated] = useState(false);\r\n    let protectedFestivals;\r\n\r\n    useEffect(() => {\r\n        if(localStorage.getItem('token')) {\r\n            setAuthenticated(true);\r\n        }\r\n    }, []);\r\n\r\n    const onAuthenticated = (auth, token) => {\r\n        setAuthenticated(auth);\r\n        \r\n        if(auth){\r\n            localStorage.setItem('token', token);\r\n        }\r\n        else {\r\n            localStorage.removeItem('token');\r\n        }\r\n    };\r\n\r\n\r\n    if(authenticated){\r\n        protectedFestivals = (\r\n            <>\r\n                <Route path=\"/festivals/:id/edit\" element={<FestivalsEdit />} />\r\n                <Route path=\"/festivals/:id\" element={<FestivalsShow />} />\r\n                <Route path=\"/festivals/create\" element={<FestivalsCreate />} />\r\n            </>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <Router>\r\n            <Container maxWidth=\"md\">\r\n                {/* <Grid container spacing={0} > */}\r\n                    <Navbar onAuthenticated={onAuthenticated} authenticated={authenticated}/>\r\n                    <Routes>\r\n                        <Route path=\"/\" element={<Home onAuthenticated={onAuthenticated} authenticated={authenticated} />} />\r\n                        <Route path=\"/festivals\" element={<FestivalsIndex authenticated={authenticated} />} />\r\n                        {protectedFestivals}\r\n\r\n                        <Route path=\"*\" element={<PageNotFound />} />\r\n                    </Routes>\r\n                {/* </Grid> */}\r\n            </Container>\r\n        </Router>\r\n    );\r\n};\r\n\r\nexport default App;"],"mappings":"qKAAA,OAASA,aAAa,GAAIC,OAAM,CAAEC,MAAM,CAAEC,KAAK,KAAQ,kBAAkB,CACzE,OAASC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,MAAOC,UAAS,KAAM,yBAAyB,CAC/C,MAAOC,KAAI,KAAM,oBAAoB,CAErC,MAAO,sBAAsB,CAE7B;AACA,MAAOC,KAAI,KAAM,cAAc,CAC/B,MAAOC,eAAc,KAAM,yBAAyB,CACpD,MAAOC,cAAa,KAAM,wBAAwB,CAClD,MAAOC,gBAAe,KAAM,0BAA0B,CACtD,MAAOC,cAAa,KAAM,wBAAwB,CAElD,MAAOC,aAAY,KAAM,sBAAsB,CAE/C;AACA,MAAOC,OAAM,KAAM,qBAAqB,CAAC,6IAEzC,GAAMC,IAAG,CAAG,QAANA,IAAG,EAAS,CACd,cAA0CX,QAAQ,CAAC,KAAK,CAAC,wCAAlDY,aAAa,eAAEC,gBAAgB,eACtC,GAAIC,mBAAkB,CAEtBb,SAAS,CAAC,UAAM,CACZ,GAAGc,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAE,CAC9BH,gBAAgB,CAAC,IAAI,CAAC,CAC1B,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN,GAAMI,gBAAe,CAAG,QAAlBA,gBAAe,CAAIC,IAAI,CAAEC,KAAK,CAAK,CACrCN,gBAAgB,CAACK,IAAI,CAAC,CAEtB,GAAGA,IAAI,CAAC,CACJH,YAAY,CAACK,OAAO,CAAC,OAAO,CAAED,KAAK,CAAC,CACxC,CAAC,IACI,CACDJ,YAAY,CAACM,UAAU,CAAC,OAAO,CAAC,CACpC,CACJ,CAAC,CAGD,GAAGT,aAAa,CAAC,CACbE,kBAAkB,cACd,wCACI,KAAC,KAAK,EAAC,IAAI,CAAC,qBAAqB,CAAC,OAAO,cAAE,KAAC,aAAa,IAAI,EAAG,cAChE,KAAC,KAAK,EAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO,cAAE,KAAC,aAAa,IAAI,EAAG,cAC3D,KAAC,KAAK,EAAC,IAAI,CAAC,mBAAmB,CAAC,OAAO,cAAE,KAAC,eAAe,IAAI,EAAG,GAEvE,CACL,CAEA,mBACI,KAAC,MAAM,wBACH,MAAC,SAAS,EAAC,QAAQ,CAAC,IAAI,wBAEhB,KAAC,MAAM,EAAC,eAAe,CAAEG,eAAgB,CAAC,aAAa,CAAEL,aAAc,EAAE,cACzE,MAAC,MAAM,yBACH,KAAC,KAAK,EAAC,IAAI,CAAC,GAAG,CAAC,OAAO,cAAE,KAAC,IAAI,EAAC,eAAe,CAAEK,eAAgB,CAAC,aAAa,CAAEL,aAAc,EAAI,EAAG,cACrG,KAAC,KAAK,EAAC,IAAI,CAAC,YAAY,CAAC,OAAO,cAAE,KAAC,cAAc,EAAC,aAAa,CAAEA,aAAc,EAAI,EAAG,CACrFE,kBAAkB,cAEnB,KAAC,KAAK,EAAC,IAAI,CAAC,GAAG,CAAC,OAAO,cAAE,KAAC,YAAY,IAAI,EAAG,GACxC,GAEL,EACP,CAEjB,CAAC,CAED,cAAeH,IAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}