{"ast":null,"code":"import _defineProperty from\"C:/Users/Fer/Documents/UNI/Year4/Javascript/MyReactApps/ca2-festivals-example-5/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Fer/Documents/UNI/Year4/Javascript/MyReactApps/ca2-festivals-example-5/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Fer/Documents/UNI/Year4/Javascript/MyReactApps/ca2-festivals-example-5/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState}from'react';import axios from'axios';import{useNavigate}from'react-router-dom';import TextField from'@mui/material/Textfield';import InputLabel from'@mui/material/InputLabel';import Select from'@mui/material/Select';import FormControl from'@mui/material/FormControl';import MenuItem from'@mui/material/MenuItem';import Button from'@mui/material/Button';import FormHelperText from'@mui/material/FormHelperText';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Create=function Create(){var _errors$title,_errors$description,_errors$city,_errors$start_date,_errors$end_date;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var navigate=useNavigate();var handleForm=function handleForm(e){var name=e.target.name;var value=e.target.value;setForm(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},name,value));});};var isRequired=function isRequired(fields){var error=false;fields.forEach(function(field){if(!form[field]){error=true;setErrors(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},field,{message:\"\".concat(field,\" is required!!!!\")}));});}});return error;};var submitForm=function submitForm(){if(!isRequired(['title','description','city','start_date'])){var token=localStorage.getItem('token');axios.post('https://festivals-api.vercel.app/api/festivals',form,{headers:{\"Authorization\":\"Bearer \".concat(token)}}).then(function(response){console.log(response.data);navigate('/festivals');}).catch(function(err){console.error(err);console.log(err.response.data.message);setErrors(err.response.data.errors);});}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Create\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(TextField,{variant:\"filled\",label:\"Title\",name:\"title\",onChange:handleForm,error:errors.title,helperText:(_errors$title=errors.title)===null||_errors$title===void 0?void 0:_errors$title.message})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(TextField,{multiline:true,rows:4,variant:\"filled\",label:\"Description\",name:\"description\",onChange:handleForm,error:errors.description,helperText:(_errors$description=errors.description)===null||_errors$description===void 0?void 0:_errors$description.message})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(FormControl,{variant:\"filled\",fullWidth:true,error:errors.city,children:[/*#__PURE__*/_jsx(InputLabel,{id:\"city-select\",children:\"City\"}),/*#__PURE__*/_jsxs(Select,{labelId:\"city-select\",name:\"city\",label:\"City\",onChange:handleForm,children:[/*#__PURE__*/_jsx(MenuItem,{value:\"Dublin\",children:\"Dublin\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Cork\",children:\"Cork\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Galway\",children:\"Galway\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Mayo\",children:\"Mayo\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Wexford\",children:\"Dublin\"})]}),/*#__PURE__*/_jsx(FormHelperText,{children:(_errors$city=errors.city)===null||_errors$city===void 0?void 0:_errors$city.message})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(TextField,{variant:\"filled\",label:\"Start Date\",type:\"datetime-local\",name:\"start_date\",onChange:handleForm,InputLabelProps:{shrink:true},error:errors.start_date,helperText:(_errors$start_date=errors.start_date)===null||_errors$start_date===void 0?void 0:_errors$start_date.message})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(TextField,{variant:\"filled\",label:\"End Date\",type:\"datetime-local\",name:\"end_date\",onChange:handleForm,InputLabelProps:{shrink:true},error:errors.end_date,helperText:(_errors$end_date=errors.end_date)===null||_errors$end_date===void 0?void 0:_errors$end_date.message})}),/*#__PURE__*/_jsx(Button,{onClick:submitForm,variant:\"contained\",children:\"Submit\"})]});};export default Create;","map":{"version":3,"names":["useState","axios","useNavigate","TextField","InputLabel","Select","FormControl","MenuItem","Button","FormHelperText","Create","form","setForm","errors","setErrors","navigate","handleForm","e","name","target","value","prevState","isRequired","fields","error","forEach","field","message","submitForm","token","localStorage","getItem","post","headers","then","response","console","log","data","catch","err","title","description","city","shrink","start_date","end_date"],"sources":["C:/Users/Fer/Documents/UNI/Year4/Javascript/MyReactApps/ca2-festivals-example-5/src/pages/festivals/Create.js"],"sourcesContent":["import { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport TextField from '@mui/material/Textfield';\r\nimport InputLabel from '@mui/material/InputLabel';\r\nimport Select from '@mui/material/Select';\r\nimport FormControl from '@mui/material/FormControl';\r\nimport MenuItem from '@mui/material/MenuItem';\r\nimport Button from '@mui/material/Button';\r\nimport FormHelperText from '@mui/material/FormHelperText';\r\n\r\nconst Create = () => {\r\n    const [form, setForm] = useState({});\r\n    const [errors, setErrors] = useState({});\r\n    const navigate = useNavigate();\r\n\r\n    const handleForm = (e) => {\r\n        let name = e.target.name;\r\n        let value = e.target.value;\r\n\r\n        setForm(prevState => ({\r\n            ...prevState,\r\n            [name]: value\r\n        }));\r\n    };\r\n\r\n    const isRequired = (fields) => {\r\n        let error = false;\r\n\r\n        fields.forEach(field => {\r\n            if(!form[field]){\r\n                error = true;\r\n                setErrors(prevState => ({\r\n                    ...prevState,\r\n                    [field]: {\r\n                        message: `${field} is required!!!!`\r\n                    }\r\n                }));\r\n            }\r\n        });\r\n\r\n        return error;\r\n    };\r\n\r\n    const submitForm = () => {\r\n\r\n        if(!isRequired(['title', 'description', 'city', 'start_date'])){\r\n            let token = localStorage.getItem('token');\r\n\r\n            axios.post('https://festivals-api.vercel.app/api/festivals', form, {\r\n                    headers: {\r\n                        \"Authorization\": `Bearer ${token}`\r\n                    }\r\n            })\r\n             .then(response => {\r\n                console.log(response.data);\r\n                navigate('/festivals');\r\n             })\r\n             .catch(err => {\r\n                console.error(err);\r\n                console.log(err.response.data.message)\r\n                setErrors(err.response.data.errors);\r\n             });\r\n        }\r\n\r\n    };\r\n\r\n    return (\r\n        <>\r\n            <h2>Create</h2>\r\n\r\n            <div className='form-group'>\r\n                <TextField \r\n                    variant='filled' \r\n                    label='Title' \r\n                    name='title' \r\n                    onChange={handleForm}\r\n                    error={errors.title}\r\n                    helperText={errors.title?.message}\r\n                />\r\n            </div>\r\n            <div className='form-group'>\r\n                <TextField \r\n                    multiline \r\n                    rows={4} \r\n                    variant='filled' \r\n                    label='Description' \r\n                    name='description' \r\n                    onChange={handleForm}\r\n                    error={errors.description}\r\n                    helperText={errors.description?.message}\r\n                />\r\n            </div>\r\n            <div className='form-group'>\r\n                <FormControl variant='filled' fullWidth error={errors.city}>\r\n                    <InputLabel id='city-select'>City</InputLabel>\r\n                    <Select labelId='city-select' name='city' label='City' onChange={handleForm}>\r\n                        <MenuItem value='Dublin'>Dublin</MenuItem>\r\n                        <MenuItem value='Cork'>Cork</MenuItem>\r\n                        <MenuItem value='Galway'>Galway</MenuItem>\r\n                        <MenuItem value='Mayo'>Mayo</MenuItem>\r\n                        <MenuItem value='Wexford'>Dublin</MenuItem>\r\n                    </Select>\r\n                    <FormHelperText>{errors.city?.message}</FormHelperText>\r\n                </FormControl>\r\n            </div>\r\n            <div className='form-group'>\r\n                <TextField \r\n                    variant='filled'\r\n                    label='Start Date'\r\n                    type='datetime-local'\r\n                    name='start_date'\r\n                    onChange={handleForm}\r\n                    InputLabelProps={{ shrink: true }}\r\n                    error={errors.start_date}\r\n                    helperText={errors.start_date?.message}\r\n                />\r\n            </div>\r\n            <div className='form-group'>\r\n                <TextField \r\n                    variant='filled'\r\n                    label='End Date'\r\n                    type='datetime-local'\r\n                    name='end_date'\r\n                    onChange={handleForm}\r\n                    InputLabelProps={{ shrink: true }}\r\n                    error={errors.end_date}\r\n                    helperText={errors.end_date?.message}\r\n                />\r\n            </div>\r\n\r\n            <Button onClick={submitForm} variant='contained'>Submit</Button>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Create;"],"mappings":"gfAAA,OAASA,QAAQ,KAAQ,OAAO,CAChC,MAAOC,MAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAOC,UAAS,KAAM,yBAAyB,CAC/C,MAAOC,WAAU,KAAM,0BAA0B,CACjD,MAAOC,OAAM,KAAM,sBAAsB,CACzC,MAAOC,YAAW,KAAM,2BAA2B,CACnD,MAAOC,SAAQ,KAAM,wBAAwB,CAC7C,MAAOC,OAAM,KAAM,sBAAsB,CACzC,MAAOC,eAAc,KAAM,8BAA8B,CAAC,6IAE1D,GAAMC,OAAM,CAAG,QAATA,OAAM,EAAS,wFACjB,cAAwBV,QAAQ,CAAC,CAAC,CAAC,CAAC,wCAA7BW,IAAI,eAAEC,OAAO,eACpB,eAA4BZ,QAAQ,CAAC,CAAC,CAAC,CAAC,yCAAjCa,MAAM,eAAEC,SAAS,eACxB,GAAMC,SAAQ,CAAGb,WAAW,EAAE,CAE9B,GAAMc,WAAU,CAAG,QAAbA,WAAU,CAAIC,CAAC,CAAK,CACtB,GAAIC,KAAI,CAAGD,CAAC,CAACE,MAAM,CAACD,IAAI,CACxB,GAAIE,MAAK,CAAGH,CAAC,CAACE,MAAM,CAACC,KAAK,CAE1BR,OAAO,CAAC,SAAAS,SAAS,wCACVA,SAAS,wBACXH,IAAI,CAAGE,KAAK,IACf,CAAC,CACP,CAAC,CAED,GAAME,WAAU,CAAG,QAAbA,WAAU,CAAIC,MAAM,CAAK,CAC3B,GAAIC,MAAK,CAAG,KAAK,CAEjBD,MAAM,CAACE,OAAO,CAAC,SAAAC,KAAK,CAAI,CACpB,GAAG,CAACf,IAAI,CAACe,KAAK,CAAC,CAAC,CACZF,KAAK,CAAG,IAAI,CACZV,SAAS,CAAC,SAAAO,SAAS,wCACZA,SAAS,wBACXK,KAAK,CAAG,CACLC,OAAO,WAAKD,KAAK,oBACrB,CAAC,IACH,CAAC,CACP,CACJ,CAAC,CAAC,CAEF,MAAOF,MAAK,CAChB,CAAC,CAED,GAAMI,WAAU,CAAG,QAAbA,WAAU,EAAS,CAErB,GAAG,CAACN,UAAU,CAAC,CAAC,OAAO,CAAE,aAAa,CAAE,MAAM,CAAE,YAAY,CAAC,CAAC,CAAC,CAC3D,GAAIO,MAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAEzC9B,KAAK,CAAC+B,IAAI,CAAC,gDAAgD,CAAErB,IAAI,CAAE,CAC3DsB,OAAO,CAAE,CACL,eAAe,kBAAYJ,KAAK,CACpC,CACR,CAAC,CAAC,CACAK,IAAI,CAAC,SAAAC,QAAQ,CAAI,CACfC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAACG,IAAI,CAAC,CAC1BvB,QAAQ,CAAC,YAAY,CAAC,CACzB,CAAC,CAAC,CACDwB,KAAK,CAAC,SAAAC,GAAG,CAAI,CACXJ,OAAO,CAACZ,KAAK,CAACgB,GAAG,CAAC,CAClBJ,OAAO,CAACC,GAAG,CAACG,GAAG,CAACL,QAAQ,CAACG,IAAI,CAACX,OAAO,CAAC,CACtCb,SAAS,CAAC0B,GAAG,CAACL,QAAQ,CAACG,IAAI,CAACzB,MAAM,CAAC,CACtC,CAAC,CAAC,CACP,CAEJ,CAAC,CAED,mBACI,wCACI,8BAAe,cAEf,YAAK,SAAS,CAAC,YAAY,uBACvB,KAAC,SAAS,EACN,OAAO,CAAC,QAAQ,CAChB,KAAK,CAAC,OAAO,CACb,IAAI,CAAC,OAAO,CACZ,QAAQ,CAAEG,UAAW,CACrB,KAAK,CAAEH,MAAM,CAAC4B,KAAM,CACpB,UAAU,gBAAE5B,MAAM,CAAC4B,KAAK,wCAAZ,cAAcd,OAAQ,EACpC,EACA,cACN,YAAK,SAAS,CAAC,YAAY,uBACvB,KAAC,SAAS,EACN,SAAS,MACT,IAAI,CAAE,CAAE,CACR,OAAO,CAAC,QAAQ,CAChB,KAAK,CAAC,aAAa,CACnB,IAAI,CAAC,aAAa,CAClB,QAAQ,CAAEX,UAAW,CACrB,KAAK,CAAEH,MAAM,CAAC6B,WAAY,CAC1B,UAAU,sBAAE7B,MAAM,CAAC6B,WAAW,8CAAlB,oBAAoBf,OAAQ,EAC1C,EACA,cACN,YAAK,SAAS,CAAC,YAAY,uBACvB,MAAC,WAAW,EAAC,OAAO,CAAC,QAAQ,CAAC,SAAS,MAAC,KAAK,CAAEd,MAAM,CAAC8B,IAAK,wBACvD,KAAC,UAAU,EAAC,EAAE,CAAC,aAAa,kBAAkB,cAC9C,MAAC,MAAM,EAAC,OAAO,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAE3B,UAAW,wBACxE,KAAC,QAAQ,EAAC,KAAK,CAAC,QAAQ,oBAAkB,cAC1C,KAAC,QAAQ,EAAC,KAAK,CAAC,MAAM,kBAAgB,cACtC,KAAC,QAAQ,EAAC,KAAK,CAAC,QAAQ,oBAAkB,cAC1C,KAAC,QAAQ,EAAC,KAAK,CAAC,MAAM,kBAAgB,cACtC,KAAC,QAAQ,EAAC,KAAK,CAAC,SAAS,oBAAkB,GACtC,cACT,KAAC,cAAc,yBAAEH,MAAM,CAAC8B,IAAI,uCAAX,aAAahB,OAAO,EAAkB,GAC7C,EACZ,cACN,YAAK,SAAS,CAAC,YAAY,uBACvB,KAAC,SAAS,EACN,OAAO,CAAC,QAAQ,CAChB,KAAK,CAAC,YAAY,CAClB,IAAI,CAAC,gBAAgB,CACrB,IAAI,CAAC,YAAY,CACjB,QAAQ,CAAEX,UAAW,CACrB,eAAe,CAAE,CAAE4B,MAAM,CAAE,IAAK,CAAE,CAClC,KAAK,CAAE/B,MAAM,CAACgC,UAAW,CACzB,UAAU,qBAAEhC,MAAM,CAACgC,UAAU,6CAAjB,mBAAmBlB,OAAQ,EACzC,EACA,cACN,YAAK,SAAS,CAAC,YAAY,uBACvB,KAAC,SAAS,EACN,OAAO,CAAC,QAAQ,CAChB,KAAK,CAAC,UAAU,CAChB,IAAI,CAAC,gBAAgB,CACrB,IAAI,CAAC,UAAU,CACf,QAAQ,CAAEX,UAAW,CACrB,eAAe,CAAE,CAAE4B,MAAM,CAAE,IAAK,CAAE,CAClC,KAAK,CAAE/B,MAAM,CAACiC,QAAS,CACvB,UAAU,mBAAEjC,MAAM,CAACiC,QAAQ,2CAAf,iBAAiBnB,OAAQ,EACvC,EACA,cAEN,KAAC,MAAM,EAAC,OAAO,CAAEC,UAAW,CAAC,OAAO,CAAC,WAAW,oBAAgB,GACjE,CAEX,CAAC,CAED,cAAelB,OAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}