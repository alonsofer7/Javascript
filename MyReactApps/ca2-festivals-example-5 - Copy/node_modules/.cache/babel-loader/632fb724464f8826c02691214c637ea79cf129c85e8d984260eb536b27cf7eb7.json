{"ast":null,"code":"import _defineProperty from\"C:/Users/Fer/Documents/UNI/Year4/Javascript/MyReactApps/ca2-festivals-example-5/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Fer/Documents/UNI/Year4/Javascript/MyReactApps/ca2-festivals-example-5/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Fer/Documents/UNI/Year4/Javascript/MyReactApps/ca2-festivals-example-5/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from'react';import axios from'../../config';import{useNavigate}from'react-router-dom';import TextField from'@mui/material/Textfield';import InputLabel from'@mui/material/InputLabel';import Select from'@mui/material/Select';import FormControl from'@mui/material/FormControl';import MenuItem from'@mui/material/MenuItem';import Button from'@mui/material/Button';import FormHelperText from'@mui/material/FormHelperText';import{useParams}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Edit=function Edit(){var _errors$title,_errors$description,_errors$city,_errors$start_date,_errors$end_date;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),festival=_useState2[0],setFestival=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),form=_useState4[0],setForm=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),errors=_useState6[0],setErrors=_useState6[1];var navigate=useNavigate();var _useParams=useParams(),id=_useParams.id;var token=localStorage.getItem('token');useEffect(function(){axios.get(\"/festivals/\".concat(id),{headers:{\"Authorization\":\"Bearer \".concat(token)}}).then(function(response){console.log(response.data);setFestival(response.data);setForm(response.data);}).catch(function(err){console.error(err);console.log(err.response.data.message);});},[token,id]);var handleForm=function handleForm(e){var name=e.target.name;var value=e.target.value;setForm(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},name,value));});};var isRequired=function isRequired(fields){var error=false;fields.forEach(function(field){if(!form[field]){error=true;setErrors(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},field,{message:\"\".concat(field,\" is required!!!!\")}));});}});return error;};var submitForm=function submitForm(){if(!isRequired(['title','description','city','start_date'])){axios.put(\"/festivals/\".concat(id),form,{headers:{\"Authorization\":\"Bearer \".concat(token)}}).then(function(response){console.log(response.data);navigate('/festivals');}).catch(function(err){console.error(err);console.log(err.response.data.message);setErrors(err.response.data.errors);});}};if(!festival)return\"Loading...\";return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Edit\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(TextField,{variant:\"filled\",label:\"Title\",name:\"title\",onChange:handleForm,error:errors.title,helperText:(_errors$title=errors.title)===null||_errors$title===void 0?void 0:_errors$title.message,value:form.title})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(TextField,{multiline:true,rows:4,variant:\"filled\",label:\"Description\",name:\"description\",onChange:handleForm,error:errors.description,helperText:(_errors$description=errors.description)===null||_errors$description===void 0?void 0:_errors$description.message,value:form.description})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(FormControl,{variant:\"filled\",fullWidth:true,error:errors.city,children:[/*#__PURE__*/_jsx(InputLabel,{id:\"city-select\",children:\"City\"}),/*#__PURE__*/_jsxs(Select,{labelId:\"city-select\",name:\"city\",label:\"City\",onChange:handleForm,value:form.city,children:[/*#__PURE__*/_jsx(MenuItem,{value:\"Dublin\",children:\"Dublin\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Cork\",children:\"Cork\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Galway\",children:\"Galway\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Mayo\",children:\"Mayo\"}),/*#__PURE__*/_jsx(MenuItem,{value:\"Wexford\",children:\"Dublin\"})]}),/*#__PURE__*/_jsx(FormHelperText,{children:(_errors$city=errors.city)===null||_errors$city===void 0?void 0:_errors$city.message})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(TextField,{variant:\"filled\",label:\"Start Date\",type:\"datetime-local\",name:\"start_date\",onChange:handleForm,InputLabelProps:{shrink:true},error:errors.start_date,helperText:(_errors$start_date=errors.start_date)===null||_errors$start_date===void 0?void 0:_errors$start_date.message,value:form.start_date})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsx(TextField,{variant:\"filled\",label:\"End Date\",type:\"datetime-local\",name:\"end_date\",onChange:handleForm,InputLabelProps:{shrink:true},error:errors.end_date,helperText:(_errors$end_date=errors.end_date)===null||_errors$end_date===void 0?void 0:_errors$end_date.message,defaultValue:form.end_date})}),/*#__PURE__*/_jsx(Button,{onClick:submitForm,variant:\"contained\",children:\"Submit\"})]});};export default Edit;","map":{"version":3,"names":["useState","useEffect","axios","useNavigate","TextField","InputLabel","Select","FormControl","MenuItem","Button","FormHelperText","useParams","Edit","festival","setFestival","form","setForm","errors","setErrors","navigate","id","token","localStorage","getItem","get","headers","then","response","console","log","data","catch","err","error","message","handleForm","e","name","target","value","prevState","isRequired","fields","forEach","field","submitForm","put","title","description","city","shrink","start_date","end_date"],"sources":["C:/Users/Fer/Documents/UNI/Year4/Javascript/MyReactApps/ca2-festivals-example-5/src/pages/festivals/Edit.js"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport axios from '../../config';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport TextField from '@mui/material/Textfield';\r\nimport InputLabel from '@mui/material/InputLabel';\r\nimport Select from '@mui/material/Select';\r\nimport FormControl from '@mui/material/FormControl';\r\nimport MenuItem from '@mui/material/MenuItem';\r\nimport Button from '@mui/material/Button';\r\nimport FormHelperText from '@mui/material/FormHelperText';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nconst Edit = () => {\r\n    const [ festival, setFestival] = useState(null);\r\n    const [form, setForm] = useState({});\r\n    const [errors, setErrors] = useState({});\r\n    const navigate = useNavigate();\r\n    const { id } = useParams();\r\n\r\n    let token = localStorage.getItem('token');\r\n\r\n    useEffect(() => {\r\n        axios.get(`/festivals/${id}`, {\r\n                headers: {\r\n                    \"Authorization\": `Bearer ${token}`\r\n                }\r\n            })\r\n             .then((response) => {\r\n                 console.log(response.data);\r\n                 setFestival(response.data);\r\n                 setForm(response.data);\r\n             })\r\n             .catch((err) => {\r\n                 console.error(err);\r\n                 console.log(err.response.data.message);                 \r\n             });\r\n    }, [token, id]);\r\n\r\n    const handleForm = (e) => {\r\n        let name = e.target.name;\r\n        let value = e.target.value;\r\n\r\n        setForm(prevState => ({\r\n            ...prevState,\r\n            [name]: value\r\n        }));\r\n    };\r\n\r\n    const isRequired = (fields) => {\r\n        let error = false;\r\n\r\n        fields.forEach(field => {\r\n            if(!form[field]){\r\n                error = true;\r\n                setErrors(prevState => ({\r\n                    ...prevState,\r\n                    [field]: {\r\n                        message: `${field} is required!!!!`\r\n                    }\r\n                }));\r\n            }\r\n        });\r\n\r\n        return error;\r\n    };\r\n\r\n    const submitForm = () => {\r\n\r\n        if(!isRequired(['title', 'description', 'city', 'start_date'])){\r\n\r\n            axios.put(`/festivals/${id}`, form, {\r\n                    headers: {\r\n                        \"Authorization\": `Bearer ${token}`\r\n                    }\r\n            })\r\n             .then(response => {\r\n                console.log(response.data);\r\n                navigate('/festivals');\r\n             })\r\n             .catch(err => {\r\n                console.error(err);\r\n                console.log(err.response.data.message)\r\n                setErrors(err.response.data.errors);\r\n             });\r\n        }\r\n\r\n    };\r\n\r\n\r\n\r\n    \r\n\r\n    if(!festival) return \"Loading...\";\r\n\r\n\r\n\r\n    return (\r\n        <>\r\n            <h2>Edit</h2>\r\n\r\n            <div className='form-group'>\r\n                <TextField \r\n                    variant='filled' \r\n                    label='Title' \r\n                    name='title' \r\n                    onChange={handleForm}\r\n                    error={errors.title}\r\n                    helperText={errors.title?.message}\r\n                    value={form.title}\r\n                />\r\n            </div>\r\n            <div className='form-group'>\r\n                <TextField \r\n                    multiline \r\n                    rows={4} \r\n                    variant='filled' \r\n                    label='Description' \r\n                    name='description' \r\n                    onChange={handleForm}\r\n                    error={errors.description}\r\n                    helperText={errors.description?.message}\r\n                    value={form.description}\r\n                />\r\n            </div>\r\n            <div className='form-group'>\r\n                <FormControl variant='filled' fullWidth error={errors.city}>\r\n                    <InputLabel id='city-select'>City</InputLabel>\r\n                    <Select labelId='city-select' name='city' label='City' onChange={handleForm} value={form.city}>\r\n                        <MenuItem value='Dublin'>Dublin</MenuItem>\r\n                        <MenuItem value='Cork'>Cork</MenuItem>\r\n                        <MenuItem value='Galway'>Galway</MenuItem>\r\n                        <MenuItem value='Mayo'>Mayo</MenuItem>\r\n                        <MenuItem value='Wexford'>Dublin</MenuItem>\r\n                    </Select>\r\n                    <FormHelperText>{errors.city?.message}</FormHelperText>\r\n                </FormControl>\r\n            </div>\r\n            <div className='form-group'>\r\n                <TextField \r\n                    variant='filled'\r\n                    label='Start Date'\r\n                    type='datetime-local'\r\n                    name='start_date'\r\n                    onChange={handleForm}\r\n                    InputLabelProps={{ shrink: true }}\r\n                    error={errors.start_date}\r\n                    helperText={errors.start_date?.message}\r\n                    value={form.start_date}\r\n                />\r\n            </div>\r\n            <div className='form-group'>\r\n                <TextField \r\n                    variant='filled'\r\n                    label='End Date'\r\n                    type='datetime-local'\r\n                    name='end_date'\r\n                    onChange={handleForm}\r\n                    InputLabelProps={{ shrink: true }}\r\n                    error={errors.end_date}\r\n                    helperText={errors.end_date?.message}\r\n                    defaultValue={form.end_date}\r\n                />\r\n            </div>\r\n\r\n            <Button onClick={submitForm} variant='contained'>Submit</Button>\r\n        </>\r\n    );\r\n};\r\n\r\nexport default Edit;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}